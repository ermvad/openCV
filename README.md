# OpenCV Filters

Приложение OpenCV Filters - это интерактивный инструмент для обработки изображений с использованием библиотеки OpenCV. Позволяет применять различные фильтры и эффекты к изображениям через удобный графический интерфейс.

## Особенности

- Поддержка множества фильтров и эффектов (более 60 различных фильтров)
- Настройка параметров каждого фильтра в реальном времени
- Возможность комбинирования фильтров
- Полный предпросмотр обработанного изображения
- Система логирования для отладки

## Структура проекта

```
opencv_filters/
│
├── main.py                 # Точка входа в приложение
├── ui.py                   # Интерфейс пользователя
├── filters.py              # Реализация всех фильтров
├── filter_manager.py       # Управление фильтрами (добавление, удаление, применение)
├── signals.py              # Сигналы для обновления UI
├── filter_category.py      # Категории фильтров
├── config.py               # Настройки приложения (тема, стили и т.д.)
├── logger.py               # Система логирования
├── logs/                   # Папка для хранения логов
└── README.md               # Документация
```

## Архитектура

Приложение построено на основе паттерна MVC (Model-View-Controller):

- **Модель**: `filter_manager.py` и `filters.py` - содержат логику обработки изображений
- **Представление**: `ui.py` - интерфейс пользователя на PyQt5
- **Контроллер**: `main.py` и обработчики событий в `ui.py`

Дополнительные компоненты:
- `signals.py` - реализует механизм обновления интерфейса при изменении данных
- `filter_category.py` - содержит классификацию фильтров по категориям
- `config.py` - содержит настройки приложения и темы
- `logger.py` - система логирования для отладки и мониторинга работы приложения

## Требования

- Python 3.6 или выше
- OpenCV 4.x
- PyQt5
- NumPy

## Установка
1. Создайте виртуальное окружение (рекомендуется):
   ```bash
   python -m venv venv
   source venv/bin/activate  # Linux/macOS
   venv\Scripts\activate     # Windows
   ```

2. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```

   Если файл requirements.txt отсутствует, установите зависимости вручную:
   ```bash
   pip install opencv-python numpy PyQt5
   ```

## Запуск

Запустите приложение с помощью команды:
```bash
python main.py
```

## Использование

### Загрузка изображения
1. Нажмите кнопку "Загрузить изображение"
2. Выберите файл изображения (.png, .jpg, .jpeg, .bmp, .tiff)

### Применение фильтров
1. Выберите категорию фильтра из списка слева
2. Выберите конкретный фильтр из выпадающего списка
3. Нажмите кнопку "Добавить выбранный фильтр"
4. Настройте параметры фильтра, если необходимо

### Управление фильтрами
- Включайте/отключайте фильтры с помощью флажка "Активен"
- Изменяйте порядок фильтров, удаляя и добавляя их заново
- Удаляйте фильтры кнопкой "Удалить фильтр"
- Сбрасывайте все фильтры кнопкой "Сбросить все фильтры"

### Сохранение результата
1. Нажмите кнопку "Сохранить результат"
2. Выберите место и имя файла для сохранения

## Категории фильтров

1. **Размытие и сглаживание** - Gaussian Blur, Median Blur, Bilateral Filter и др.
2. **Обнаружение краев и контуров** - Canny, Sobel, Laplacian и др.
3. **Цветовые преобразования** - Grayscale, Sepia, HSV conversion и др.
4. **Морфологические операции** - Erosion, Dilation, Opening, Closing и др.
5. **Геометрические преобразования** - Resize, Rotate, Flip и др.
6. **Улучшение изображения** - Gamma Correction, Brightness/Contrast и др.
7. **Сегментация и пороги** - Thresholding, Adaptive Threshold, Watershed и др.
8. **Выделение признаков** - SIFT, SURF, ORB descriptors и др.
9. **Пользовательские фильтры** - Cartoon effect, Pixelation, Vignette и др.

## Отладка и логирование

Система логирования автоматически сохраняет информацию о работе приложения в папку `logs/`. Логи содержат информацию о:

- Загрузке и сохранении изображений
- Применении фильтров
- Ошибках и исключениях
- Общей работе приложения

Для анализа ошибок проверьте последний файл в каталоге `logs/`.

## Настройка

### Настройка темы
Вы можете изменить тему приложения, отредактировав переменную `DARK_STYLE` в файле `config.py`.

### Добавление новых фильтров
Для добавления нового фильтра:

1. Создайте функцию фильтра в `filters.py`
2. Добавьте фильтр в соответствующую категорию в `ui.py` (метод `populate_filters`)
3. Добавьте логику создания фильтра в `add_filter_category` в `ui.py`

